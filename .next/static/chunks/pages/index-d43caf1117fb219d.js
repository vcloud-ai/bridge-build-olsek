(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{2541:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return K}});var r=n(7294),i=n(6825),o=n(9499),s=n(7833),a=n(4449);s.ZP.form.withConfig({displayName:"styles__SearchCamerasForm",componentId:"sc-xdnbcd-0"})(["display:flex;flex-direction:column;padding:15px;min-width:700px;"]);var c=s.ZP.div.withConfig({displayName:"styles__Wrapper",componentId:"sc-xdnbcd-1"})(["flex:1;overflow-x:auto;"]),l=s.ZP.div.withConfig({displayName:"styles__LoaderWrapper",componentId:"sc-xdnbcd-2"})(["position:absolute;top:42px;left:0;width:100%;height:calc(100% - 42px);background:rgb(255,255,255,0.2);z-index:0;display:flex;align-items:center;justify-content:center;"]);s.ZP.div.withConfig({displayName:"styles__SearchCamerasHeader",componentId:"sc-xdnbcd-3"})(["display:flex;align-items:center;width:100%;margin-top:25px;margin-bottom:10px;"]),s.ZP.div.withConfig({displayName:"styles__TableHead",componentId:"sc-xdnbcd-4"})(["display:flex;align-items:center;width:100%;height:28px;margin:5px 0;padding:5px 0;margin-right:12px;"]),s.ZP.div.withConfig({displayName:"styles__RightSide",componentId:"sc-xdnbcd-5"})(["flex-direction:column;overflow-x:auto;width:100%;"]),s.ZP.div.withConfig({displayName:"styles__LeftSide",componentId:"sc-xdnbcd-6"})(["display:flex;flex-direction:column;margin-right:5px;"]),s.ZP.img.withConfig({displayName:"styles__BlockImg",componentId:"sc-xdnbcd-7"})(["height:28px;cursor:pointer;margin-bottom:5px;",";",";"],function(e){return e.inactive&&"\n    opacity: 0;\n    pointer-events: none;\n    cursor: auto;\n  "},function(e){return e.isDisabled&&"\n    pointer-events: none;\n    cursor: auto;\n  "}),s.ZP.div.withConfig({displayName:"styles__Row",componentId:"sc-xdnbcd-8"})(["display:flex;align-items:center;height:28px;margin-bottom:5px;"]),s.ZP.div.withConfig({displayName:"styles__SearchCamerasFooter",componentId:"sc-xdnbcd-9"})(["display:flex;flex-direction:column;margin:45px 0 0 45px;"]),s.ZP.div.withConfig({displayName:"styles__FooterButtonsWrapper",componentId:"sc-xdnbcd-10"})(["display:flex;"]),s.ZP.div.withConfig({displayName:"styles__TableBlock",componentId:"sc-xdnbcd-11"})(["display:flex;width:100%;overflow:hidden;"]),a.i.colors.inputFieldColor,a.i.colors.inputFieldColor,a.i.colors.inputFieldColor;var d=s.ZP.div.withConfig({displayName:"styles__Wrapper",componentId:"sc-11xu8qg-0"})(["margin-bottom:20px;display:flex;align-items:center;"]),u=s.ZP.p.withConfig({displayName:"styles__Text",componentId:"sc-11xu8qg-1"})(["font-weight:300;color:",";margin:0 25px 0 0;font-size:16px;text-transform:uppercase;user-select:none;"],function(e){return e.theme.colors.accentColor}),p=s.ZP.input.withConfig({displayName:"styles__Input",componentId:"sc-11xu8qg-2"})(["background-color:",";padding:12px 0px 11px;font-size:16px;color:rgb(255,255,255);font-family:",";font-weight:300;border-radius:4px;border:1px solid ",";outline:none;height:30px;width:145px;text-align:center;&:focus,&:active{border:1px solid ",";}"],function(e){return e.theme.colors.inputFieldColor},function(e){return e.theme.font},function(e){return e.theme.colors.secondaryContainerBackgroundColor},function(e){return e.theme.colors.switcherLoaderColor}),f=s.ZP.p.withConfig({displayName:"styles__TextBetween",componentId:"sc-11xu8qg-3"})(["font-family:",";color:rgb(191,205,217);margin:0px 15px;font-size:16px;user-select:none;"],function(e){return e.theme.font}),g=n(5893),m=function(e){var t=e.ranges,n=e.setRanges,i=(0,r.useRef)(null),o=(0,r.useRef)(null);(0,r.useEffect)(function(){null!=t&&t.start&&null!=t&&t.end&&(i.current.value=t.start,o.current.value=t.end)},[t]);var s=function(){n({end:o.current.value,start:i.current.value})};return(0,g.jsxs)(d,{children:[(0,g.jsx)(u,{children:"Add cameras from the local host:"}),(0,g.jsx)(p,{ref:i,type:"text",onChange:s}),(0,g.jsx)(f,{children:"to"}),(0,g.jsx)(p,{ref:o,type:"text",onChange:s})]})},h=n(29);function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function y(e){return function(e){if(Array.isArray(e))return x(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var b=n(7794),w=n.n(b),v=s.ZP.div.withConfig({displayName:"styles__Wrapper",componentId:"sc-292dbe-0"})(["display:flex;align-items:center;justify-content:center;"]),j=s.ZP.div.withConfig({displayName:"styles__Grid",componentId:"sc-292dbe-1"})(["display:grid;overflow-x:auto;width:100%;grid-template-columns:20px 100px 150px 150px repeat(3,minmax(200px,400px)) 100px;gap:2px;grid-auto-rows:minmax(10px,auto);"]),C=s.ZP.input.withConfig({displayName:"styles__Input",componentId:"sc-292dbe-2"})(["background-color:",";padding:12px 0px 11px;font-size:16px;color:rgb(255,255,255);font-family:",";font-weight:300;border-radius:4px;border:1px solid ",";outline:none;height:30px;width:100%;padding:0 10px;text-align:center;&:focus,&:active{border:1px solid ",";}"],function(e){return e.theme.colors.inputFieldColor},function(e){return e.theme.font},function(e){return e.theme.colors.secondaryContainerBackgroundColor},function(e){return e.theme.colors.switcherLoaderColor}),_=s.ZP.div.withConfig({displayName:"styles__ColumnTitle",componentId:"sc-292dbe-3"})(["font-family:",";font-weight:300;color:rgb(191,205,217);display:flex;align-items:center;justify-content:center;margin:0px;height:25px;text-align:center;box-sizing:border-box;font-size:15px;user-select:none;"],function(e){return e.theme.font}),P=s.ZP.div.withConfig({displayName:"styles__InputCell",componentId:"sc-292dbe-4"})(["padding:1.5px 15px;border-right:1px solid ",";background-color:",";width:100%;display:flex;align-items:center;justify-content:center;"],function(e){return e.theme.colors.menuColor},function(e){return e.theme.colors.menuColor}),O=s.ZP.p.withConfig({displayName:"styles__Text",componentId:"sc-292dbe-5"})(["font-family:",";color:rgb(191,205,217);font-weight:300;display:flex;align-items:center;justify-content:center;margin:0px;text-align:center;font-size:15px;user-select:none;"],function(e){return e.theme.font}),I=s.ZP.button.withConfig({displayName:"styles__Button",componentId:"sc-292dbe-6"})(["display:flex;cursor:pointer;padding:0;margin:0;border:none;outline:none;background-color:transparent;align-items:center;justify-content:center;",""],function(e){return e.isRtsp&&"transform: scale(1.4);"}),Z=n(5675),k=n.n(Z),N={src:"/_next/static/media/searchCameraArrow.9fd4830c.svg",height:32,width:23},S={src:"/_next/static/media/searchCameraCross.32a55090.svg",height:32,width:32},A=n(4447),L=n(2109),z=n(1163);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var R=function(e){var t,n=e.device,o=e.cameras,s=e.setCameras,a=e.i,c=e.isLoadingAdding,l=e.setIsLoadingAdding,d=e.theme,u=(0,z.useRouter)(),p=(0,r.useState)(n.port),f=p[0],m=p[1],x=(0,r.useState)(n.name||""),b=x[0],v=x[1],j=(0,r.useState)(n.login||""),_=j[0],Z=j[1],A=(0,r.useState)(),D=A[0],R=A[1],$=function(e){var t=e.target.value.trim(),n=e.target.name,r=y(o);switch(r[a][n]=t,s(r),n){case"port":m(t);break;case"name":v(t);break;case"login":Z(t);break;case"password":R(t)}},F=(t=(0,h.Z)(w().mark(function e(){var t,n,r,c;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!(t=o[a]).name||!t.name.trim().length)){e.next=4;break}return(0,L.Z)({type:"error",message:"Name is required"}),e.abrupt("return");case 4:if(!(!t.login||!t.login.trim().length)){e.next=7;break}return(0,L.Z)({type:"error",message:"Login is required"}),e.abrupt("return");case 7:if(!(!t.port||!t.port.toString().trim().length)){e.next=10;break}return(0,L.Z)({type:"error",message:"Port is required"}),e.abrupt("return");case 10:if(n=/^(6553[0-5]|655[0-2][0-9]|65[0-4][0-9]{2}|6[0-4][0-9]{3}|[1-5][0-9]{4}|[0-9]{1,4})$|^(6553[0-5]|655[0-2][0-9]|65[0-4][0-9]{2}|6[0-4][0-9]{3}|[1-5][0-9]{4}|[0-9]{1,4})-(6553[0-5]|655[0-2][0-9]|65[0-4][0-9]{2}|6[0-4][0-9]{3}|[1-5][0-9]{4}|[0-9]{1,4})$/.test(t.port),!(b.trim().length<2)){e.next=14;break}return(0,L.Z)({type:"error",message:"Name must be at least 2 characters"}),e.abrupt("return");case 14:if(n){e.next=17;break}return(0,L.Z)({type:"error",message:"Invalid port"}),e.abrupt("return");case 17:return e.prev=17,l(!0),e.next=21,(0,i.vV)(E(E({},t),{},{login:_,password:D,port:f,name:b.trim()}));case 21:if(e.sent){e.next=24;break}return e.abrupt("return");case 24:(c=y(o))[a].isAdded=!0,s(c),e.next=32;break;case 29:e.prev=29,e.t0=e.catch(17),u.push("/login");case 32:return e.prev=32,l(!1),e.finish(32);case 35:case"end":return e.stop()}},e,null,[[17,29,32,35]])})),function(){return t.apply(this,arguments)}),T=d.dynamicIcons.plus;return"ONVIF"!==n.type&&(T=S),n.isAdded&&(T=N),(0,g.jsxs)(r.Fragment,{children:[(0,g.jsx)(I,{isRtsp:"ONVIF"!==n.type,onClick:T===d.dynamicIcons.plus?F:function(){},disabled:T!==d.dynamicIcons.plus||c,children:(0,g.jsx)(k(),{src:T,alt:"",width:20,height:35})}),(0,g.jsx)(P,{children:(0,g.jsx)(O,{children:n.type})}),(0,g.jsx)(P,{children:(0,g.jsx)(O,{children:n.ip})}),(0,g.jsx)(P,{children:(0,g.jsx)(C,{type:"text",value:f,name:"port",onChange:$})}),(0,g.jsx)(P,{children:(0,g.jsx)(C,{type:"text",value:b,name:"name",onChange:$})}),(0,g.jsx)(P,{children:(0,g.jsx)(C,{type:"text",value:_,name:"login",onChange:$})}),(0,g.jsx)(P,{children:(0,g.jsx)(C,{type:"password",value:D,name:"password",onChange:$})}),(0,g.jsx)(P,{children:(0,g.jsx)(O,{children:n.ping})})]})},$=function(e){var t=e.cameras,n=e.isSearching,r=e.setCameras,i=e.isLoadingAdding,o=e.setIsLoadingAdding,s=e.theme;return n?(0,g.jsx)(v,{children:(0,g.jsx)(A.Z,{customStyles:{zIndex:0}})}):null!=t&&t.length?(0,g.jsxs)(j,{children:[(0,g.jsx)(_,{}),(0,g.jsx)(_,{children:"Device type"}),(0,g.jsx)(_,{children:"IP address"}),(0,g.jsx)(_,{children:"Port"}),(0,g.jsx)(_,{children:"Name"}),(0,g.jsx)(_,{children:"Login"}),(0,g.jsx)(_,{children:"Password"}),(0,g.jsx)(_,{children:"Ping"}),t.map(function(e,n){return(0,g.jsx)(R,{theme:s,i:n,setCameras:r,device:e,cameras:t,isLoadingAdding:i,setIsLoadingAdding:o},n)})]}):(0,g.jsx)(v,{children:(0,g.jsx)(O,{children:"List is empty"})})},F=(0,a.Z)($),T=s.ZP.div.withConfig({displayName:"styles__Wrapper",componentId:"sc-11ger81-0"})(["margin-top:50px;display:flex;padding:0 50px;"]),q=s.ZP.button.withConfig({displayName:"styles__PrimaryButton",componentId:"sc-11ger81-1"})(["background-color:",";border:1px solid ",";font-family:",";font-weight:400;color:rgb(191,205,217);margin:0px;font-size:16px;user-select:none;display:flex;justify-content:space-around;align-items:center;box-sizing:border-box;height:39px;border-radius:3rem;outline:none;cursor:pointer;width:200px;background-color:",";border:1px solid ",";margin-right:30px;"],function(e){return e.theme.colors.menuColor},function(e){return e.theme.colors.accentColor},function(e){return e.theme.font},function(e){return e.theme.colors.menuColor},function(e){return e.theme.colors.accentColor}),B=s.ZP.button.withConfig({displayName:"styles__SecondaryButton",componentId:"sc-11ger81-2"})(["display:flex;justify-content:space-around;align-items:center;box-sizing:border-box;height:39px;background-color:",";border-radius:3rem;outline:none;border:none;font-size:16px;font-family:",";font-weight:400;cursor:pointer;user-select:none;width:200px;"],function(e){return e.theme.colors.accentColor},function(e){return e.theme.font});function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var H=function(e){var t,n,r=e.isSearching,o=e.setIsSearching,s=e.isLoadingAdding,a=e.setIsLoadingAdding,c=e.cameras,l=e.setCameras,d=e.ranges,u=(0,z.useRouter)(),p=(t=(0,h.Z)(w().mark(function e(){var t,n,r,s,a;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,o(!0),t=/^(?!0)(?!.*\.$)((1?\d?\d|25[0-5]|2[0-4]\d)(\.|$)){4}$/.test(d.start),n=/^(?!0)(?!.*\.$)((1?\d?\d|25[0-5]|2[0-4]\d)(\.|$)){4}$/.test(d.end),!(!t||!n)){e.next=7;break}return(0,L.Z)({type:"error",message:"Invalid IP range"}),e.abrupt("return");case 7:if(!((r=function(e){return e.split(".").slice(0,3).join(".")})(d.start)!==r(d.end))){e.next=11;break}return(0,L.Z)({type:"error",message:"Invalid IP range"}),e.abrupt("return");case 11:if(!((s=function(e){return+e.split(".").pop()})(d.start)>s(d.end))){e.next=15;break}return(0,L.Z)({type:"error",message:"Invalid IP range"}),e.abrupt("return");case 15:return e.next=17,(0,i.YL)(d);case 17:l(e.sent),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),u.push("login");case 24:return e.prev=24,o(!1),e.finish(24);case 27:case"end":return e.stop()}},e,null,[[0,21,24,27]])})),function(){return t.apply(this,arguments)}),f=(n=(0,h.Z)(w().mark(function e(){var t,n,r,o;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((t=c.filter(function(e){return!e.isAdded})).every(function(e){return X(e)})){e.next=5;break}return(0,L.Z)({type:"error",message:"Some fields are missing"}),e.abrupt("return");case 5:return e.prev=5,a(!0),e.next=9,(0,i.qm)(t);case 9:if(r=e.sent,o=c.map(function(e){return r.find(function(t){return t.ip===e.ip})?V(V({},e),{},{isAdded:!0}):e}),l(o),r.length){e.next=15;break}return(0,L.Z)({type:"info",message:"No added cameras"}),e.abrupt("return");case 15:(0,L.Z)({type:"info",message:"Cameras successfully added"}),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(5),u.push("login");case 21:return e.prev=21,a(!1),e.finish(21);case 24:case"end":return e.stop()}},e,null,[[5,18,21,24]])})),function(){return n.apply(this,arguments)});return(0,g.jsxs)(T,{children:[(0,g.jsx)(q,{onClick:f,disabled:r||s||!(null!=c&&c.length),children:"Add all devices"}),(0,g.jsx)(B,{onClick:p,children:"Refresh search"})]})};function X(e){if(!e.name||!e.name.trim().length||!e.login||!e.login.trim().length||!e.ip||!e.ip.trim().length||!e.port||!e.port.toString().trim().length)return!1;var t=/^\w{2,}$/.test(e.name),n=/^(6553[0-5]|655[0-2][0-9]|65[0-4][0-9]{2}|6[0-4][0-9]{3}|[1-5][0-9]{4}|[0-9]{1,4})$|^(6553[0-5]|655[0-2][0-9]|65[0-4][0-9]{2}|6[0-4][0-9]{3}|[1-5][0-9]{4}|[0-9]{1,4})-(6553[0-5]|655[0-2][0-9]|65[0-4][0-9]{2}|6[0-4][0-9]{3}|[1-5][0-9]{4}|[0-9]{1,4})$/.test(e.port);return!!t&&!!n}function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var M=function(e){var t=(0,r.useState)(!1),n=t[0],i=t[1];return(0,g.jsxs)(c,{children:[(0,g.jsx)(m,G({},e)),(0,g.jsx)(F,G(G({},e),{},{isLoadingAdding:n,setIsLoadingAdding:i})),(0,g.jsx)(H,G(G({},e),{},{isLoadingAdding:n,setIsLoadingAdding:i})),n&&(0,g.jsx)(l,{children:(0,g.jsx)(A.Z,{})})]})},U=n(9669),J=n.n(U);function K(){var e=(0,z.useRouter)(),t=(0,r.useState)(null),n=t[0],o=t[1],s=(0,r.useState)(null),a=s[0],c=s[1],l=(0,r.useState)(!1),d=l[0],u=l[1];return(0,r.useEffect)(function(){var t=localStorage.getItem("authToken");t&&(J().defaults.headers.common.Authorization=t),u(!0),(0,i.qL)().then(function(e){return c(e),(0,i.YL)(e)}).then(o).catch(function(t){e.push("/login")}).finally(function(){u(!1)})},[]),(0,g.jsx)("div",{children:(0,g.jsx)("main",{children:(0,g.jsx)(M,{ranges:a,setRanges:c,isSearching:d,setIsSearching:u,cameras:n,setCameras:o})})})}},5557:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(2541)}])}},function(e){e.O(0,[774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);