(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[201],{9004:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return B}});var r=n(7294),o=n(29),i=n(7794),s=n.n(i),u=n(5675),c=n.n(u),l=n(4447),a=n(9609),d=n(7833),p=d.ZP.div.withConfig({displayName:"styles__Wrapper",componentId:"sc-1xjw84o-0"})(["width:100%;padding:25px;display:flex;align-items:center;justify-content:center;"]),x=d.ZP.div.withConfig({displayName:"styles__InputWrapper",componentId:"sc-1xjw84o-1"})(["margin-bottom:25px;position:relative;"]),f=d.ZP.form.withConfig({displayName:"styles__Form",componentId:"sc-1xjw84o-2"})(["display:flex;flex-direction:column;align-items:center;"]),h=d.ZP.div.withConfig({displayName:"styles__Label",componentId:"sc-1xjw84o-3"})(["font-size:13px;font-family:",";font-weight:300;color:rgb(191,205,217);margin-bottom:10px;user-select:none;"],function(e){return e.theme.font}),m=d.ZP.input.withConfig({displayName:"styles__Input",componentId:"sc-1xjw84o-4"})(["background-color:",";padding:12px 0px 11px;font-size:16px;color:rgb(255,255,255);font-family:",";font-weight:400;border-radius:4px;border:1px solid ",";outline:none;height:38px;max-width:600px;width:50vw;min-width:300px;padding:0 10px;&:focus,&:active{border:1px solid ",";}"],function(e){return e.theme.colors.inputFieldColor},function(e){return e.theme.font},function(e){return e.theme.colors.secondaryContainerBackgroundColor},function(e){return e.theme.colors.switcherLoaderColor}),g=d.ZP.input.withConfig({displayName:"styles__SelectInput",componentId:"sc-1xjw84o-5"})(["background-color:",";padding:12px 0px 11px;font-size:16px;color:rgb(255,255,255);font-family:",";font-weight:400;border-radius:4px;border:1px solid ",";outline:none;height:38px;max-width:600px;width:50vw;min-width:300px;padding:0 10px;cursor:pointer;"],function(e){return e.theme.colors.inputFieldColor},function(e){return e.theme.font},function(e){return e.theme.colors.secondaryContainerBackgroundColor}),w=d.ZP.input.withConfig({displayName:"styles__IPInput",componentId:"sc-1xjw84o-6"})(["height:45px;background-color:",";padding:12px 0px 11px;font-size:16px;color:rgb(255,255,255);font-family:",";font-weight:400;border-radius:4px;border:1px solid ",";outline:none;width:100%;padding:0 10px;&:focus,&:active{border:1px solid ",";}"],function(e){return e.theme.colors.inputFieldColor},function(e){return e.theme.font},function(e){return e.theme.colors.secondaryContainerBackgroundColor},function(e){return e.theme.colors.switcherLoaderColor}),y=d.ZP.input.withConfig({displayName:"styles__PortInput",componentId:"sc-1xjw84o-7"})(["height:45px;background-color:",";padding:12px 0px 11px;font-size:16px;color:rgb(255,255,255);font-family:",";font-weight:400;border-radius:4px;border:1px solid ",";outline:none;width:100%;padding:0 10px;&:focus,&:active{border:1px solid ",";}"],function(e){return e.theme.colors.inputFieldColor},function(e){return e.theme.font},function(e){return e.theme.colors.secondaryContainerBackgroundColor},function(e){return e.theme.colors.switcherLoaderColor}),b=d.ZP.button.withConfig({displayName:"styles__Button",componentId:"sc-1xjw84o-8"})(["display:flex;justify-content:space-around;align-items:center;box-sizing:border-box;height:39px;background-color:",";border-radius:3rem;outline:none;border:none;font-size:16px;font-family:",";font-weight:400;cursor:pointer;user-select:none;width:160px;"],function(e){return e.theme.colors.accentColor},function(e){return e.theme.font}),j=d.ZP.div.withConfig({displayName:"styles__HorizontalRow",componentId:"sc-1xjw84o-9"})(["display:flex;align-items:center;justify-content:space-between;max-width:600px;width:50vw;min-width:300px;"]),v=d.ZP.div.withConfig({displayName:"styles__DropdownWrapper",componentId:"sc-1xjw84o-10"})(["position:relative;display:flex;align-items:center;"]),_=d.ZP.div.withConfig({displayName:"styles__DropdownButton",componentId:"sc-1xjw84o-11"})(["width:38px;height:38px;background-color:",";border-radius:4px;display:flex;justify-content:center;align-items:center;position:absolute;right:0;cursor:pointer;",";"],function(e){return e.theme.colors.switcherLoaderColor},function(e){return e.customStyles}),C=d.ZP.div.withConfig({displayName:"styles__OptionsWrapper",componentId:"sc-1xjw84o-12"})(["display:flex;flex-direction:column;position:absolute;border-radius:5px;background-color:",";z-index:2;max-height:200px;overflow-y:auto;box-shadow:rgb(16 27 38) 1px 2px 5px;width:calc(100% - 38px);padding:5px 0px;top:40px;padding:10px;"],function(e){return e.theme.colors.menuColor}),k=d.ZP.div.withConfig({displayName:"styles__Option",componentId:"sc-1xjw84o-13"})(["cursor:pointer;font-size:16px;font-family:",";font-weight:300;height:30px;color:rgb(191,205,217);user-select:none;"],function(e){return e.theme.font}),Z=n(2109),P=n(6825),I=n(1163),N=n(1517),R=n(4865),z=n(5893),L=["RTSP","ONVIF"],S=function(){var e,t=(0,I.useRouter)(),n=(0,r.useState)(!1),i=n[0],u=n[1],d=(0,r.useState)(!1),S=d[0],B=d[1],F=(0,r.useState)(L[0]),O=F[0],$=F[1],q=(0,r.useRef)(null),E=(0,r.useRef)(null),A=(0,r.useRef)(null),D=(0,r.useRef)(null),T=(0,r.useRef)(null),U=(0,r.useRef)(null),W=O===L[0],V=(e=(0,o.Z)(s().mark(function e(n){var r,o,i,c,l,a,d,p,x;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),a={name:q.current.value,login:T.current.value,password:U.current.value,type:O},O===L[0]?a.url=D.current.value:(a.ip=E.current.value,a.port=A.current.value),null!==(r=a.name)&&void 0!==r&&r.trim().length){e.next=6;break}return(0,Z.Z)({type:"error",message:"Name is required"}),e.abrupt("return");case 6:if(null!==(o=a.login)&&void 0!==o&&o.trim().length){e.next=9;break}return(0,Z.Z)({type:"error",message:"Login is required"}),e.abrupt("return");case 9:if(!(W&&!(null!==(i=a.url)&&void 0!==i&&i.trim().length))){e.next=12;break}return(0,Z.Z)({type:"error",message:"URL is required"}),e.abrupt("return");case 12:if(!(!W&&!(null!==(c=a.ip)&&void 0!==c&&c.trim().length))){e.next=15;break}return(0,Z.Z)({type:"error",message:"IP is required"}),e.abrupt("return");case 15:if(!(!W&&!(null!==(l=a.port)&&void 0!==l&&l.trim().length))){e.next=18;break}return(0,Z.Z)({type:"error",message:"Port is required"}),e.abrupt("return");case 18:if(d=/^(?!0)(?!.*\.$)((1?\d?\d|25[0-5]|2[0-4]\d)(\.|$)){4}$/.test(a.ip),p=/^(6553[0-5]|655[0-2][0-9]|65[0-4][0-9]{2}|6[0-4][0-9]{3}|[1-5][0-9]{4}|[0-9]{1,4})$|^(6553[0-5]|655[0-2][0-9]|65[0-4][0-9]{2}|6[0-4][0-9]{3}|[1-5][0-9]{4}|[0-9]{1,4})-(6553[0-5]|655[0-2][0-9]|65[0-4][0-9]{2}|6[0-4][0-9]{3}|[1-5][0-9]{4}|[0-9]{1,4})$/.test(a.port),x=/^rtsp:\/\/.+\/.*$/.test(a.url),!(a.name.trim().length<2)){e.next=24;break}return(0,Z.Z)({type:"error",message:"Name must be at least 2 characters"}),e.abrupt("return");case 24:if(!(!W&&!d)){e.next=27;break}return(0,Z.Z)({type:"error",message:"Invalid IP"}),e.abrupt("return");case 27:if(!(!W&&!p)){e.next=30;break}return(0,Z.Z)({type:"error",message:"Invalid port"}),e.abrupt("return");case 30:if(!(W&&!x)){e.next=33;break}return(0,Z.Z)({type:"error",message:"URL must have RTSP protocol"}),e.abrupt("return");case 33:return e.prev=33,u(!0),e.next=37,(0,P.vV)(a);case 37:e.next=42;break;case 39:e.prev=39,e.t0=e.catch(33),t.push("/login");case 42:return e.prev=42,u(!1),e.finish(42);case 45:case"end":return e.stop()}},e,null,[[33,39,42,45]])})),function(t){return e.apply(this,arguments)});return(0,z.jsx)(p,{children:(0,z.jsxs)(f,{onSubmit:V,children:[(0,z.jsxs)(x,{children:[(0,z.jsx)(h,{children:"Device name"}),(0,z.jsx)(m,{ref:q,type:"text"})]}),(0,z.jsx)(a.d,{onClickAway:function(){return B(!1)},children:(0,z.jsxs)(x,{children:[(0,z.jsx)(h,{children:"Camera type"}),(0,z.jsxs)(v,{children:[(0,z.jsx)(g,{onClick:function(){return B(function(e){return!e})},readOnly:!0,value:O}),(0,z.jsx)(_,{onClick:function(){return B(function(e){return!e})},children:(0,z.jsx)(c(),{src:S?R.Z:N.Z,alt:"",width:10,height:10})}),S&&(0,z.jsx)(C,{children:L.map(function(e){return(0,z.jsx)(k,{onClick:function(){$(e),B(function(e){return!e})},children:e},e)})})]})]})}),O!==L[0]?(0,z.jsxs)(j,{children:[(0,z.jsxs)(x,{children:[(0,z.jsx)(h,{children:"IP"}),(0,z.jsx)(w,{ref:E,type:"text",placeholder:"IP"})]}),(0,z.jsxs)(x,{children:[(0,z.jsx)(h,{children:"Port"}),(0,z.jsx)(y,{ref:A,type:"text",placeholder:"Port"})]})]}):(0,z.jsxs)(x,{children:[(0,z.jsx)(h,{children:"Url"}),(0,z.jsx)(m,{ref:D,type:"text"})]}),(0,z.jsxs)(x,{children:[(0,z.jsx)(h,{children:"Login"}),(0,z.jsx)(m,{ref:T,type:"text"})]}),(0,z.jsxs)(x,{children:[(0,z.jsx)(h,{children:"Password"}),(0,z.jsx)(m,{ref:U,type:"password"})]}),i?(0,z.jsx)(l.Z,{}):(0,z.jsx)(b,{type:"submit",children:"Add"})]})})};function B(){return(0,z.jsx)("main",{children:(0,z.jsx)(S,{})})}},8503:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/device",function(){return n(9004)}])},1517:function(e,t){"use strict";t.Z={src:"/_next/static/media/dropdownArrow.5a57e90d.svg",height:7,width:11}},4865:function(e,t){"use strict";t.Z={src:"/_next/static/media/dropdownArrowUp.53dad0f4.svg",height:7,width:11}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=8503)}),_N_E=e.O()}]);